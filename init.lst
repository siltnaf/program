C51 COMPILER V9.54   INIT                                                                  04/24/2020 19:51:39 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE INIT
OBJECT MODULE PLACED IN init.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.EXE Public\src\init.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PRINT
                    -(.\init.lst) TABS(2) OBJECT(init.obj)

line level    source

   1          
   2          #include "./public/inc/config.h" 
   3          #include "./public/inc/Timer.h" 
   4          #include "./public/inc/delay.h"  
   5          #include "./public/inc/init.h"
   6          
   7          #include "STC15F104E.h"
   8          
   9          
  10          void IO_Init(void)
  11          {
  12   1        
  13   1        //                 P3M1   P3M0
  14   1        //P30(BUZ)->CMOS     0      1
  15   1        //P31(LED)->OUTPUT   0      0
  16   1        //P32(SW)->INPUT     1      0
  17   1        //P33(O3)->OUTPUT    0      0
  18   1        //P34(UV)->CMOS      0      1
  19   1        //P35(FAN)->OUTPUT   0      0
  20   1        
  21   1        
  22   1        P3M1 = 0x04;
  23   1        P3M0 = 0x11;
  24   1        
  25   1      }
  26          
  27          
  28          void InitTime0(void)
  29          {
  30   1        
  31   1        TMOD &= 0xf0;              //clear timer0 mode 
  32   1      
  33   1        
  34   1        AUXR =0x00 ;           //timer 0 as 12T mode
  35   1        
  36   1        TH0 =(65536-counter_us)/256;
  37   1        TL0 = (65536-counter_us)%256;
  38   1        
  39   1        TR0 =1;     
  40   1        ET0 =1;      
  41   1        
  42   1        
  43   1        
  44   1      }
  45               
  46          
  47          
  48          void InitExtInterrupt (void)
  49          {
  50   1      
  51   1        IT0=0;    //detect both falling and rising edge of signal (AC signal)
  52   1        EX0=1;
  53   1        PX0=1;
  54   1        IT1=0;    //detect both falling and rising edge of signal  (H1 signal) only rising edge 
C51 COMPILER V9.54   INIT                                                                  04/24/2020 19:51:39 PAGE 2   

  55   1        EX1=1;    //enable INT1
  56   1        PX1=1;
  57   1        INT_CLKO |= 0x10;  //enable INT2, falling edge 
  58   1        
  59   1      }
  60          
  61          
  62          
  63          
  64          void InitParameter(void )
  65          {
  66   1      
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     41    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
