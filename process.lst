C51 COMPILER V9.54   PROCESS                                                               01/25/2021 07:23:52 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROCESS
OBJECT MODULE PLACED IN process.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.EXE Public\src\process.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PR
                    -INT(.\process.lst) TABS(2) OBJECT(process.obj)

line level    source

   1          
   2          #include "./public/inc/config.h"  
   3          #include "./public/inc/delay.h"  
   4          #include "./public/inc/init.h"
   5          #include "./public/inc/process.h"
   6          #include "STC15F104E.h"
   7          #include <intrins.h>
   8          
   9          
  10          
  11          
  12          void Process_Timer()
  13          {
  14   1      
  15   1        if (Timer_update==1)
  16   1        {
  17   2          
  18   2          Time_us++;    
  19   2          Timer_update=0; 
  20   2          if (Time_us>=4)
  21   2            {
  22   3              Time_us=0;
  23   3              Time_ms++;
  24   3            }
  25   2          
  26   2      
  27   2          if (Time_ms>=1000) 
  28   2            {
  29   3              
  30   3              Time_ms=0;
  31   3              power_refresh++;
  32   3              Time_sec++;
  33   3            }
  34   2          if (Time_sec>=60)
  35   2            {
  36   3          
  37   3              Time_sec=0;
  38   3              Time_min++;
  39   3            }
  40   2          
  41   2        } 
  42   1      
  43   1      
  44   1      }
  45          
  46          
  47          
  48          
  49          //void Process_UV()
  50          //{
  51          //  if (UV_on==1)
  52          //  {
  53          //  
  54          //    UV=1;
C51 COMPILER V9.54   PROCESS                                                               01/25/2021 07:23:52 PAGE 2   

  55          //  }
  56          //  else UV=0;
  57          
  58          //}
  59          
  60          
  61           
  62          
  63          
  64          void Process_LED()
  65          {
  66   1      
  67   1        switch (LED_type)
  68   1            {
  69   2              case 0:     
  70   2                          SET_INPUT(IO_LED);
  71   2                         
  72   2                          break;
  73   2      
  74   2              case 1:     SET_CMOS(IO_LED);
  75   2                          LED=0;
  76   2                          break;
  77   2              
  78   2              case 2:     SET_CMOS(IO_LED);
  79   2                          if (Time_ms%2==0) LED=1;else LED=0;
  80   2                          break;
  81   2              
  82   2              case 3:     SET_CMOS(IO_LED);
  83   2                          LED=1;
  84   2                          break;
  85   2              
  86   2              case 4:     
  87   2                          if ((Time_sec%2==0) &&(Time_ms%8==0))
  88   2                          {
  89   3                            SET_CMOS(IO_LED);
  90   3                            LED=0;
  91   3                            
  92   3                          }
  93   2                            else 
  94   2                            {
  95   3                            SET_INPUT(IO_LED);
  96   3                            LED=1;
  97   3                            }
  98   2                          
  99   2                          
 100   2                            
 101   2                          break;
 102   2              
 103   2          
 104   2            }
 105   1      }
 106          
 107          
 108          
 109          
 110          void Process_sleep()
 111            
 112          {
 113   1      
 114   1        
 115   1        if ((Time_min>=time_1min) && (state==standby_mode))
 116   1        {
C51 COMPILER V9.54   PROCESS                                                               01/25/2021 07:23:52 PAGE 3   

 117   2          PCON|=0x02;
 118   2          _nop_ ();
 119   2          
 120   2          
 121   2          _nop_ ();
 122   2          _nop_ ();
 123   2          _nop_ ();
 124   2          _nop_ ();
 125   2          _nop_ ();
 126   2          _nop_ ();
 127   2          _nop_ ();
 128   2          _nop_ ();
 129   2          _nop_ ();
 130   2          _nop_ ();
 131   2          
 132   2          
 133   2          
 134   2        }
 135   1      
 136   1        
 137   1        
 138   1      }
 139          
 140          
 141          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    212    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
