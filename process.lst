C51 COMPILER V9.54   PROCESS                                                               04/26/2020 04:52:12 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROCESS
OBJECT MODULE PLACED IN process.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.EXE Public\src\process.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PR
                    -INT(.\process.lst) TABS(2) OBJECT(process.obj)

line level    source

   1          
   2          #include "./public/inc/config.h"  
   3          #include "./public/inc/delay.h"  
   4          #include "./public/inc/init.h"
   5          #include "./public/inc/process.h"
   6          #include "STC15F104E.h"
   7          
   8          
   9          
  10          
  11          
  12          void Process_Timer()
  13          {
  14   1      
  15   1        if (Timer_update==1)
  16   1        {
  17   2          Time_ms++;
  18   2          Timer_update=0; 
  19   2          if (Time_ms>=1000) 
  20   2            {
  21   3              
  22   3              Time_ms=0;
  23   3              Time_sec++;
  24   3            }
  25   2          if (Time_sec>=60)
  26   2            {
  27   3          
  28   3              Time_sec=0;
  29   3              Time_min++;
  30   3            }
  31   2          
  32   2        } 
  33   1      
  34   1      
  35   1      }
  36          
  37          
  38          
  39          
  40          void Process_UV()
  41          {
  42   1        if (UV_on==1)
  43   1        {
  44   2        
  45   2          if((Time_ms%2)==0) UV=0;
  46   2             else UV=1;
  47   2        }
  48   1        else UV=0;
  49   1      
  50   1      }
  51          
  52          void Process_O3()
  53          {
  54   1        switch (O3_level)
C51 COMPILER V9.54   PROCESS                                                               04/26/2020 04:52:12 PAGE 2   

  55   1        {
  56   2          case 0:      O3=0;
  57   2                        break;
  58   2          case 1:      
  59   2                        if ((Time_sec%3)==0) O3=~O3;      //enable every 1 out of 3sec
  60   2            
  61   2                        break;
  62   2          case 2:       O3=1;
  63   2                        break;
  64   2        }
  65   1      }
  66          
  67          void Process_BUZ()
  68          {
  69   1        if ((key_holdtime>0)&&(key_holdtime<press_time))  Beep=1; else Beep=0;
  70   1      
  71   1      
  72   1      
  73   1        
  74   1        
  75   1      
  76   1      }
  77          
  78          
  79          void Process_LED()
  80          {
  81   1      
  82   1      switch (LED_type)
  83   1            {
  84   2              case 0:     LED=0;
  85   2                          break;
  86   2              case 1:     LED=1;
  87   2                          break;
  88   2              case 2:     
  89   2                          if (Time_sec%2==0) LED=1;else LED=0;
  90   2                          break;
  91   2            } 
  92   1        
  93   1      }
  94          
  95          
  96          void Process_FAN()
  97            
  98          {
  99   1      
 100   1          //P35 as output
 101   1        //                      P3M1   P3M0
 102   1        //P30(BUZ)->CMOS          0      1
 103   1        //P31(LED/BUZ)->CMOS      0      1
 104   1        //P32(SW)->INPUT          1      0
 105   1        //P33(O3)->OUTPUT         0      0
 106   1        //P34(UV)->CMOS           0      1
 107   1        //P35(FAN)->OUTPUT        0      0
 108   1              
 109   1            
 110   1               P3M1 &=0xdf;                      //P3M1 &=0b11011111;
 111   1               P3M0 &=0xdf;                      //P3M0 &=0b11011111;
 112   1        
 113   1        
 114   1        
 115   1        
 116   1        
C51 COMPILER V9.54   PROCESS                                                               04/26/2020 04:52:12 PAGE 3   

 117   1        if (Fan_on==1) FAN=1;else FAN=0;
 118   1              
 119   1      
 120   1        
 121   1        
 122   1      }
 123          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    209    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
