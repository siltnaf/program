C51 COMPILER V9.54   PROCESS                                                               09/03/2020 12:40:01 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROCESS
OBJECT MODULE PLACED IN process.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.EXE Public\src\process.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PR
                    -INT(.\process.lst) TABS(2) OBJECT(process.obj)

line level    source

   1          
   2          #include "./public/inc/config.h"  
   3          #include "./public/inc/delay.h"  
   4          #include "./public/inc/init.h"
   5          #include "./public/inc/process.h"
   6          #include "STC15F104E.h"
   7          #include <intrins.h>
   8          
   9          
  10          
  11          
  12          void Process_Timer()
  13          {
  14   1      
  15   1        if (Timer_update==1)
  16   1        {
  17   2          
  18   2          Time_us++;    
  19   2          Timer_update=0; 
  20   2          if (Time_us>=4)
  21   2            {
  22   3              Time_us=0;
  23   3              Time_ms++;
  24   3            }
  25   2          
  26   2      
  27   2          if (Time_ms>=1000) 
  28   2            {
  29   3              
  30   3              Time_ms=0;
  31   3              Time_sec++;
  32   3            }
  33   2          if (Time_sec>=60)
  34   2            {
  35   3          
  36   3              Time_sec=0;
  37   3              Time_min++;
  38   3            }
  39   2          
  40   2        } 
  41   1      
  42   1      
  43   1      }
  44          
  45          
  46          
  47          
  48          void Process_UV()
  49          {
  50   1        if (UV_on==1)
  51   1        {
  52   2        
  53   2          if((Time_sec%8)==0) UV=0;
  54   2             else UV=1;
C51 COMPILER V9.54   PROCESS                                                               09/03/2020 12:40:01 PAGE 2   

  55   2      //    if((Time_us%2)==0) UV=0;
  56   2      //       else UV=1;
  57   2        }
  58   1        else UV=0;
  59   1      
  60   1      }
  61          
  62          void Process_O3()
  63          {
  64   1        switch (O3_level)
  65   1        {
  66   2          case 0:      
  67   2                        
  68   2                        O3_on=0;
  69   2                        break;
  70   2          case 1:      
  71   2                        switch (Time_sec%4)
  72   2                        {
  73   3                          case 0,1:           
  74   3                                              O3_on=1;
  75   3                                              break;
  76   3                          
  77   3                          case 2:             
  78   3                                              O3_on=1;              //enable every 1 out of 3sec        
  79   3                                              break;
  80   3                          
  81   3                          case 3:            
  82   3                      
  83   3                        O3_on=0;
  84   3                                              break;
  85   3                        }                 
  86   2                        break;
  87   2          case 2:       
  88   2                      
  89   2                        O3_on=1;
  90   2                        break;
  91   2        }
  92   1      }
  93          
  94          void Process_BUZ()
  95          {
  96   1       
  97   1        
  98   1      if (Beep==0) 
  99   1      {
 100   2        
 101   2        
 102   2        
 103   2        
 104   2         SET_INPUT(IO_BUZ);
 105   2          
 106   2      }
 107   1      
 108   1        
 109   1      
 110   1      
 111   1      
 112   1      }
 113          
 114          
 115          void Process_LED()
 116          {
C51 COMPILER V9.54   PROCESS                                                               09/03/2020 12:40:01 PAGE 3   

 117   1      if (Beep==0)
 118   1      {
 119   2        switch (LED_type)
 120   2            {
 121   3              case 0:     LED=1;
 122   3                          break;
 123   3              case 1:     LED=0;
 124   3                          break;
 125   3              case 2:     
 126   3                          if (Time_sec%2==0) LED=1;else LED=0;
 127   3                          break;
 128   3            } 
 129   2      }
 130   1      }
 131          
 132          
 133          void Process_ION()
 134            
 135          {
 136   1      
 137   1        SET_OUTPUT(IO_ION);
 138   1              
 139   1            
 140   1        
 141   1        
 142   1        
 143   1        
 144   1        if (ION_on==1) ION=1; else ION=0;
 145   1              
 146   1      
 147   1        
 148   1        
 149   1      }
 150          
 151          
 152          void Process_sleep()
 153            
 154          {
 155   1      
 156   1        
 157   1        if ((Time_min>=time_1min) && (state==standby_mode))
 158   1        {
 159   2          EX1=1;
 160   2          EX0=1;
 161   2          SW1=0;
 162   2          SW2=0;
 163   2          SET_INPUT(IO_SW2);
 164   2          SET_INPUT(IO_SW1);
 165   2          
 166   2         
 167   2          PCON|=0x02;
 168   2          _nop_ ();
 169   2          
 170   2          
 171   2          _nop_ ();
 172   2          _nop_ ();
 173   2          _nop_ ();
 174   2          _nop_ ();
 175   2          _nop_ ();
 176   2          _nop_ ();
 177   2          _nop_ ();
 178   2          _nop_ ();
C51 COMPILER V9.54   PROCESS                                                               09/03/2020 12:40:01 PAGE 4   

 179   2          _nop_ ();
 180   2          _nop_ ();
 181   2          
 182   2          
 183   2          
 184   2        }
 185   1      
 186   1        
 187   1        
 188   1      }
 189          
 190          
 191          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    260    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
