C51 COMPILER V9.54   PROCESS                                                               04/18/2021 07:16:34 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROCESS
OBJECT MODULE PLACED IN process.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Public\src\process.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PR
                    -INT(.\process.lst) TABS(2) OBJECT(process.obj)

line level    source

   1          
   2          #include "./public/inc/config.h"  
   3          #include "./public/inc/delay.h"  
   4          #include "./public/inc/init.h"
   5          #include "./public/inc/process.h"
   6          #include "STC15F104E.h"
   7          #include <intrins.h>
   8          
   9          
  10          
  11          void    LoadPWM(uint16 i)
  12          {
  13   1          uint16 j;
  14   1          AUXR &= ~(1<<4);    //stop counter
  15   1          if(i > PWM_HIGH_MAX)        i = PWM_HIGH_MAX;   //max range for PWM
  16   1          if(i < PWM_HIGH_MIN)        i = PWM_HIGH_MIN;   //min range for PWM
  17   1          j = 65536UL - PWM_DUTY + i; //low value for PWM
  18   1          i = 65536UL - i;            //high value for PWM
  19   1          EA = 0;
  20   1          PWM_high = i;   //
  21   1          PWM_low  = j;   //
  22   1          PWM_FAN=0;
  23   1          EA=1;
  24   1      }
  25          
  26          
  27          
  28          
  29          
  30          
  31          void Process_Timer()
  32          {
  33   1      
  34   1        if (Timer_update==1)
  35   1        {
  36   2          
  37   2          Time_us++;    
  38   2          Timer_update=0; 
  39   2          if (Time_us>=4)
  40   2            {
  41   3              Time_us=0;
  42   3              Time_ms++;
  43   3            }
  44   2          
  45   2      
  46   2          if (Time_ms>=1000) 
  47   2            {
  48   3              
  49   3              Time_ms=0;
  50   3              power_refresh++;
  51   3              Time_sec++;
  52   3            }
  53   2          if (Time_sec>=60)
  54   2            {
C51 COMPILER V9.54   PROCESS                                                               04/18/2021 07:16:34 PAGE 2   

  55   3          
  56   3              Time_sec=0;
  57   3              Time_min++;
  58   3            }
  59   2          
  60   2        } 
  61   1      
  62   1      
  63   1      }
  64          
  65          
  66          
  67          
  68          //void Process_UV()
  69          //{
  70          //  if (UV_on==1)
  71          //  {
  72          //  
  73          //    UV=1;
  74          //  }
  75          //  else UV=0;
  76          
  77          //}
  78          
  79          
  80           
  81          
  82          
  83          void Process_LED()
  84          {
  85   1      
  86   1        switch (LED_type)
  87   1            {
  88   2              case 0:     
  89   2                          SET_INPUT(IO_LED);
  90   2                         
  91   2                          break;
  92   2      
  93   2              case 1:     SET_CMOS(IO_LED);
  94   2                          LED=0;
  95   2                          break;
  96   2              
  97   2              case 2:     SET_CMOS(IO_LED);
  98   2                          if (Time_ms%2==0) LED=1;else LED=0;
  99   2                          break;
 100   2              
 101   2              case 3:     SET_CMOS(IO_LED);
 102   2                          LED=1;
 103   2                          break;
 104   2              
 105   2              case 4:     
 106   2                          if ((Time_sec%2==0) &&(Time_ms%8==0))
 107   2                          {
 108   3                            SET_CMOS(IO_LED);
 109   3                            LED=0;
 110   3                            
 111   3                          }
 112   2                            else 
 113   2                            {
 114   3                            SET_INPUT(IO_LED);
 115   3                            LED=1;
 116   3                            }
C51 COMPILER V9.54   PROCESS                                                               04/18/2021 07:16:34 PAGE 3   

 117   2                          
 118   2                          
 119   2                            
 120   2                          break;
 121   2              
 122   2          
 123   2            }
 124   1      }
 125          
 126          
 127          
 128          
 129          void Process_sleep()
 130            
 131          {
 132   1      
 133   1        
 134   1        if ((Time_min>=time_1min) && (state==standby_mode))
 135   1        {
 136   2          PCON|=0x02;
 137   2          _nop_ ();
 138   2          
 139   2          
 140   2          _nop_ ();
 141   2          _nop_ ();
 142   2          _nop_ ();
 143   2          _nop_ ();
 144   2          _nop_ ();
 145   2          _nop_ ();
 146   2          _nop_ ();
 147   2          _nop_ ();
 148   2          _nop_ ();
 149   2          _nop_ ();
 150   2          
 151   2          
 152   2          
 153   2        }
 154   1      
 155   1        
 156   1        
 157   1      }
 158          
 159          
 160          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    285    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----       2
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
