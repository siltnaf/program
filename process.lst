C51 COMPILER V9.54   PROCESS                                                               05/21/2020 17:26:53 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROCESS
OBJECT MODULE PLACED IN process.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.EXE Public\src\process.c OMF2 ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG PR
                    -INT(.\process.lst) TABS(2) OBJECT(process.obj)

line level    source

   1          
   2          #include "./public/inc/config.h"  
   3          #include "./public/inc/delay.h"  
   4          #include "./public/inc/init.h"
   5          #include "./public/inc/process.h"
   6          #include "STC15F104E.h"
   7          
   8          
   9          
  10          
  11          
  12          void Process_Timer()
  13          {
  14   1      
  15   1        if (Timer_update==1)
  16   1        {
  17   2          
  18   2          
  19   2          
  20   2        
  21   2          
  22   2          
  23   2          Time_ms++;
  24   2          Timer_update=0; 
  25   2          if (Time_ms>=1000) 
  26   2            {
  27   3              
  28   3              Time_ms=0;
  29   3              Time_sec++;
  30   3            }
  31   2          if (Time_sec>=60)
  32   2            {
  33   3          
  34   3              Time_sec=0;
  35   3              Time_min++;
  36   3            }
  37   2          
  38   2        } 
  39   1      
  40   1      
  41   1      }
  42          
  43          
  44          
  45          
  46          void Process_UV()
  47          {
  48   1        if (UV_on==1)
  49   1        {
  50   2        
  51   2          if((Time_ms%2)==0) UV=0;
  52   2             else UV=1;
  53   2        }
  54   1        else UV=0;
C51 COMPILER V9.54   PROCESS                                                               05/21/2020 17:26:53 PAGE 2   

  55   1      
  56   1      }
  57          
  58          void Process_O3()
  59          {
  60   1        switch (O3_level)
  61   1        {
  62   2          case 0:      
  63   2                        
  64   2                        O3=0;
  65   2                        break;
  66   2          case 1:      
  67   2                        switch (Time_sec%4)
  68   2                        {
  69   3                          case 0,1:           
  70   3                                              O3=1;
  71   3                                              break;
  72   3                          
  73   3                          case 2:             
  74   3                                              O3=1;             //enable every 1 out of 3sec        
  75   3                                              break;
  76   3                          
  77   3                          case 3:            
  78   3                                              O3=0;
  79   3                                              break;
  80   3                        }                 
  81   2                        break;
  82   2          case 2:       
  83   2                      
  84   2                        O3=1;
  85   2                        break;
  86   2        }
  87   1      }
  88          
  89          void Process_BUZ()
  90          {
  91   1       
  92   1        
  93   1      if (Beep==0) 
  94   1      {
  95   2        
  96   2        
  97   2          //P32 as input
  98   2        //                      P3M1   P3M0
  99   2        //P30(BUZ)->INPUT         1      1
 100   2        //P31(LED)->CMOS          0      1
 101   2        //P32(SW/BUZ)->INPUT      1      0
 102   2        //P33(O3)->OUTPUT         0      0
 103   2        //P34(UV)->CMOS           0      1
 104   2        //P35(ION)->OUTPUT        0      0
 105   2              
 106   2      
 107   2        //P3M1 |=0b0000 0100;
 108   2        //P3M0 &=0b1111 1011;
 109   2        
 110   2        
 111   2          P3M1 |= 0x04;               //P32 as input  
 112   2          P3M0 &= 0xfb;
 113   2      }
 114   1      
 115   1        
 116   1      
C51 COMPILER V9.54   PROCESS                                                               05/21/2020 17:26:53 PAGE 3   

 117   1      
 118   1      
 119   1      }
 120          
 121          
 122          void Process_LED()
 123          {
 124   1      if (Beep==0)
 125   1      {
 126   2        switch (LED_type)
 127   2            {
 128   3              case 0:     LED=0;
 129   3                          break;
 130   3              case 1:     LED=1;
 131   3                          break;
 132   3              case 2:     
 133   3                          if (Time_sec%2==0) LED=1;else LED=0;
 134   3                          break;
 135   3            } 
 136   2      }
 137   1      }
 138          
 139          
 140          void Process_ION()
 141            
 142          {
 143   1      
 144   1          //P35 as output
 145   1        //                      P3M1   P3M0
 146   1        //P30(BUZ)->INPUT         1      1
 147   1        //P31(LED/BUZ)->CMOS      0      1
 148   1        //P32(SW)->INPUT          1      0
 149   1        //P33(O3)->OUTPUT         0      0
 150   1        //P34(UV)->CMOS           0      1
 151   1        //P35(ION)->OUTPUT        0      0
 152   1              
 153   1            
 154   1               P3M1 &=0xdf;                      //P3M1 &=0b11011111;
 155   1               P3M0 &=0xdf;                      //P3M0 &=0b11011111;
 156   1        
 157   1        
 158   1        
 159   1        
 160   1        
 161   1        if (ION_on==1) ION=1;else ION=0;
 162   1              
 163   1      
 164   1        
 165   1        
 166   1      }
 167          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    198    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
C51 COMPILER V9.54   PROCESS                                                               05/21/2020 17:26:53 PAGE 4   

   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
